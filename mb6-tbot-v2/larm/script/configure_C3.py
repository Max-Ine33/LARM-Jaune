#!/usr/bin/env python3
import os, random

# Random pose of X cans close to the start position. 
number= 12
model_name= "can"
labels= ['x','y','z','R','P','Y']
noise= [0.3, 0.3, 0, 0, 0, 3.14]

def repose(pose) :
    # Noise
    new_pose= [ random.uniform(-error, error) for error in noise ]
    for i in range(len(pose)) :
        new_pose[i]+= pose[i]

    # Fall or up-side-down
    if random.random() < 0.5 :
        new_pose[3]= 1.5708  # roll, set on the ground.
        new_pose[2]= 0.05 # z, corection.
        new_pose[4]= random.uniform(-3.14, 3.14) # Pith, random orientation 
    elif random.random() < 0.25 :
        new_pose[3]= 3.1416  # roll, set on the ground.
        new_pose[2]= 0.13 # z, corection.

    return new_pose

def spawn(pose, name) :
    print( "Spawn '"+ name +"' at "+ str(pose) )
    cmd= 'rosrun gazebo_ros spawn_model -file `rospack find larm`/models/coke_can/model.sdf -sdf'
    for label, value in zip(labels, pose) :
        cmd+= ' -'+ label +' '+ str(value)
    cmd+= ' -model '+ name
    os.system(cmd)

poses= [[10.942, -11.8161, -0.002946, -0.063233, -0.00915, -0.000611],
[11.1455, -5.23445, -0.002897, -0.064079, -0.005744, -0.000583],
[8.62314, -8.29553, -0.002853, -0.064236, -0.002973, -0.000572],
[4.9754, -11.8346, -0.00281, -0.064298, -0.000266, -0.000586],
[8.28778, -11.9997, -0.002778, -0.062285, 0.002774, -0.000557],
[2.67102, -11.7073, -0.002748, -0.060406, 0.004076, -0.000539],
[0.950383, -10.0438, -0.002718, -0.058579, 0.00534, -0.00052],
[-1.32642, -11.9816, -0.002681, -0.056371, 0.00687, -0.000497],
[-2.94773, -9.879, -0.002659, -0.055112, 0.007741, -0.000483],
[-1.1155, -9.32057, 0, 0, -0, 0],
[-6.22761, -12.0071, 0, 0, -0, 0],
[-7.00292, -9.9999, 0, 0, -0, 0],
[-7.3044, -9.62463, 0, 0, -0, 0],
[-7.13261, -15.1029, 0, 0, -0, 0],
[-6.50044, -13.6703, 0, 0, -0, 0],
[-7.38565, -13.3334, 0, 0, -0, 0],
[-4.95901, -19.1827, 0, 0, -0, 0],
[-6.27065, -19.3738, 0, 0, -0, 0],
[-7.09739, -18.1226, 0, 0, -0, 0],
[-1.44413, -19.1499, 0, 0, -0, 0],
[-1.33882, -17.6682, 0, 0, -0, 0],
[-1.5495, -18.395, 0, 0, -0, 0],
[-3.34856, -18.5576, 0, 0, -0, 0],
[-3.41854, -19.3723, 0, 0, -0, 0],
[0.586481, -16.5608, 0, 0, -0, 0],
[-3.03541, -16.4978, 0, 0, -0, 0],
[2.33196, -19.0306, 0, 0, -0, 0],
[1.04994, -17.6543, 0, 0, -0, 0],
[2.64508, -14.8171, 0, 0, -0, 0],
[1.3575, -14.9149, 0, 0, -0, 0],
[1.60837, -13.8713, 0, 0, -0, 0],
[6.25949, -14.6976, 0, 0, -0, 0],
[6.06273, -12.8744, 0, 0, -0, 0],
[4.53949, -13.1636, 0, 0, -0, 0],
[8.11172, -16.5455, 0, 0, -0, 0],
[6.54924, -19.3006, 0, 0, -0, 0],
[3.94231, -18.9782, 0, 0, -0, 0],
[9.18379, -18.3216, 0, 0, -0, 0],
[7.8265, -18.5269, 0, 0, -0, 0],
[13.3603, -17.4031, 0, 0, -0, 0],
[11.8717, -19.1366, 0, 0, -0, 0],
[15.8471, -17.5472, 0, 0, -0, 0],
[15.7248, -18.3915, 0, 0, -0, 0],
[20.5513, -16.9907, 0, 0, -0, 0],
[20.5713, -19.4768, 0, 0, -0, 0],
[23.2672, -16.4916, 0, 0, -0, 0],
[23.6246, -19.4397, 0, 0, -0, 0],
[28.083, -16.4665, 0, 0, -0, 0],
[28.3767, -15.2075, 0, 0, -0, 0],
[28.1385, -13.7348, 0, 0, -0, 0],
[28.1914, -19.1664, 0, 0, -0, 0],
[5.47724, -4.61249, 0, 0, -0, 0],
[6.5396, -4.48701, 0, 0, -0, 0],
[7.55548, -4.53217, 0, 0, -0, 0],
[8.51071, -4.59961, 0, 0, -0, 0],
[9.46529, -4.53571, 0, 0, -0, 0],
[5.52111, -5.60872, 0, 0, -0, 0],
[9.60459, -7.43984, 0, 0, -0, 0],
[5.65072, -0.979827, 0, 0, -0, 0],
[6.95266, -1.08438, 0, 0, -0, 0],
[7.05842, -2.61204, 0, 0, -0, 0],
[8.23886, -1.20198, 0, 0, -0, 0],
[9.4539, -1.16633, 0, 0, -0, 0],
[8.33866, -2.78747, 0, 0, -0, 0],
[6.57206, 0.349391, 0, 0, -0, 0],
[8.5815, 0.449445, 0, 0, -0, 0],
[8.36618, 1.6244, 0, 0, -0, 0],
[8.54804, 2.53999, 0, 0, -0, 0],
[8.40615, 4.14611, 0, 0, -0, 0],
[10.8497, 2.34807, 0, 0, -0, 0],
[11.0422, 6.34602, 0, 0, -0, 0],
[6.96162, 6.57209, 0, 0, -0, 0],
[3.96495, 4.50662, 0, 0, -0, 0],
[5.58025, 3.75784, 0, 0, -0, 0],
[5.69875, 2.63632, 0, 0, -0, 0],
[5.51921, 1.88123, 0, 0, -0, 0],
[3.65146, 2.58315, 0, 0, -0, 0],
[3.98125, 1.1052, 0, 0, -0, 0],
[2.60069, 1.30604, 0, 0, -0, 0],
[2.5929, -2.74776, 0, 0, -0, 0],
[2.76467, -1.07368, 0, 0, -0, 0],
[2.4439, -4.3982, 0, 0, -0, 0],
[0.999989, -5.25611, 0, 0, -0, 0],
[7.9706, -13.331, 0, 0, -0, 0],
[8.68203, -14.4627, 0, 0, -0, 0],
[11.2523, -12.9951, 0, 0, -0, 0],
[13.463, -14.0273, 0, 0, -0, 0],
[13.3876, -14.6594, 0, 0, -0, 0],
[12.4909, -14.6096, 0, 0, -0, 0],
[24.6472, -13.0601, 0, 0, -0, 0],
[23.217, -13.0965, 0, 0, -0, 0],
[21.6923, -12.9896, 0, 0, -0, 0],
[24.5933, -9.32195, 0, 0, -0, 0],
[20.6159, -10.4172, 0, 0, -0, 0],
[19.1859, -9.99144, 0, 0, -0, 0],
[16.4749, -13.0647, 0, 0, -0, 0],
[16.0415, -13.8049, 0, 0, -0, 0],
[19.8852, -13.1245, 0, 0, -0, 0],
[17.365, -9.53168, 0, 0, -0, 0],
[15.4967, -9.46245, 0, 0, -0, 0],
[16.7868, -11.4821, 0, 0, -0, 0],
[13.7895, -9.57732, 0, 0, -0, 0],
[12.4083, -11.1658, 0, 0, -0, 0],
[11.0424, -9.89451, 0, 0, -0, 0],
[5.12365, -8.81753, 0, 0, -0, 0],
[1.34066, -8.09246, 0, 0, -0, 0],
[-2.47781, -8.10947, 0, 0, -0, 0],
[-0.611846, -8.17398, 0, 0, -0, 0],
[-0.635628, -7.17153, 0, 0, -0, 0],
[-8.03563, -8.27109, 0, 0, -0, 0],
[-6.20612, -8.38838, 0, 0, -0, 0],
[-8.95755, -5.02183, 0, 0, -0, 0],
[-7.59478, -4.21858, 0, 0, -0, 0],
[-10.0811, 0.217376, 0, 0, -0, 0],
[-11.86, -1.36138, 0, 0, -0, 0],
[-11.9791, 1.60812, 0, 0, -0, 0],
[-9.2972, -19.5786, 0, 0, -0, 0],
[-1.4026, -13.2507, 0, 0, -0, 0],
[-2.90338, -13.5562, 0, 0, -0, 0],
[-10.6674, -15.1383, 0, 0, -0, 0],
[-13.6277, -19.2488, 0, 0, -0, 0],
[-13.2797, -15.8349, 0, 0, -0, 0],
[-11.643, -18.2994, 0, 0, -0, 0],
[-8.66575, -14.0519, 0, 0, -0, 0],
[-11.6396, -11.4891, 0, 0, -0, 0],
[-11.5784, -13.0189, 0, 0, -0, 0],
[-13.8709, -13.7764, 0, 0, -0, 0],
[-13.6784, -9.89245, 0, 0, -0, 0],
[-8.77339, -9.39949, 0, 0, -0, 0],
[-10.2787, -12.4036, 0, 0, -0, 0],
[-8.86904, -17.2265, 0, 0, -0, 0],
[-11.6468, -7.5685, 0, 0, -0, 0],
[-13.8477, -4.348, 0, 0, -0, 0],
[-13.1817, -7.01722, 0, 0, -0, 0],
[-10.1396, -7.7054, 0, 0, -0, 0],
[-13.8626, -3.00892, 0, 0, -0, 0],
[-15.2114, -3.29299, 0, 0, -0, 0],
[-16.3809, -3.82651, 0, 0, -0, 0],
[-17.9526, -2.71333, 0, 0, -0, 0],
[24.0514, -11.8979, 0, 0, -0, 0],
[26.2333, -10.3865, 0, 0, -0, 0],
[28.1433, -9.70869, 0, 0, -0, 0],
[28.1036, -12.2785, 0, 0, -0, 0],
[26.6882, -12.2715, 0, 0, -0, 0],
[-4.37058, 1.21464, 0, 0, -0, 0],
[-5.72025, 10.8335, 0, 0, -0, 0],
[-4.91322, 10.5983, 0, 0, -0, 0],
[-4.47661, 10.061, 0, 0, -0, 0],
[-5.1515, 10.096, 0, 0, -0, 0],
[-4.69735, 9.727, 0, 0, -0, 0],
[-5.37098, 9.6092, 0, 0, -0, 0],
[-5.63659, 10.1627, 0, 0, -0, 0],
[-5.28484, 10.449, 0, 0, -0, 0],
[-4.6135, 10.3805, 0, 0, -0, 0],
[-5.08382, 10.921, 0, 0, -0, 0],
[-4.34044, 10.9551, 0, 0, -0, 0],
[-4.08514, 10.2333, 0, 0, -0, 0],
[-4.2269, 9.56458, 0, 0, -0, 0],
[-6.0276, 10.2001, 0, 0, -0, 0],
[-5.48308, 11.3526, 0, 0, -0, 0],
[-4.7732, 11.3777, 0, 0, -0, 0],
[-11.6218, 2.84363, 0, 0, -0, 0],
[-13.9501, 3.80511, 0, 0, -0, 0],
[-12.8137, 11.4581, 0, 0, -0, 0],
[-14.4595, 13.8519, 0, 0, -0, 0],
[-15.2536, 18.5921, 0, 0, -0, 0],
[-15.8098, 13.6923, 0, 0, -0, 0],
[-18.8109, 7.87857, 0, 0, -0, 0],
[-15.1422, 2.83427, 0, 0, -0, 0],
[-15.0009, 1.50475, 0, 0, -0, 0],
[-4.79523, 9.19967, 0, 0, -0, 0],
[2.40146, 11.2832, 0, 0, -0, 0],
[-9.12897, 19.779, 0, 0, -0, 0],
[-5.84853, 18.1068, 0, 0, -0, 0],
[-12.2608, 19.9862, 0, 0, -0, 0],
[-12.3437, 17.6943, 0, 0, -0, 0],
[-12.3784, 22.5449, 0, 0, -0, 0],
[-9.92945, 22.7212, 0, 0, -0, 0],
[-7.25997, 21.5939, 0, 0, -0, 0],
[1.7847, 23.7488, 0, 0, -0, 0],
[-4.64284, 17.4395, 0, 0, -0, 0],
[2.55025, 17.8334, 0, 0, -0, 0],
[-0.735181, 19.1367, 0, 0, -0, 0],
[10.2779, 10.9834, 0, 0, -0, 0],
[4.2734, 14.7572, 0, 0, -0, 0],
[11.1393, 13.9449, 0, 0, -0, 0],
[7.16195, 21.9564, 0, 0, -0, 0],
[9.74466, 23.7208, 0, 0, -0, 0],
[12.8503, 21.3029, 0, 0, -0, 0],
[13.6113, 21.2809, 0, 0, -0, 0],
[13.2869, 21.3883, 0, 0, -0, 0],
[12.2338, 21.0952, 0, 0, -0, 0],
[19.4487, 22.8536, 0, 0, -0, 0],
[19.1809, 20.6075, 0, 0, -0, 0],
[35.834, 16.3857, 0, 0, -0, 0],
[35.6877, 22.4012, 0, 0, -0, 0],
[29.3857, 21.8697, 0, 0, -0, 0],
[29.3014, 23.3886, 0, 0, -0, 0],
[35.6945, 20.6466, 0, 0, -0, 0],
[35.7343, 16.7424, 0, 0, -0, 0],
[35.6849, 16.5309, 0, 0, -0, 0],
[35.9484, 16.504, 0, 0, -0, 0],
[30.8465, 20.3574, 0, 0, -0, 0],
[23.534, 20.9938, 0, 0, -0, 0],
[23.838, 21.0961, 0, 0, -0, 0],
[23.3859, 21.2118, 0, 0, -0, 0],
[22.5051, 24.2208, 0, 0, -0, 0],
[20.8476, 24.2238, 0, 0, -0, 0],
[22.4358, 21.0959, 0, 0, -0, 0],
[22.5444, 22.9353, 0, 0, -0, 0],
[20.8475, 22.4415, 0, 0, -0, 0],
[21.741, 21.0709, 0, 0, -0, 0],
[21.7799, 23.8715, 0, 0, -0, 0],
[26.5866, 23.8196, 0, 0, -0, 0],
[15.7338, 17.4703, 0, 0, -0, 0],
[30.29, 10.2407, 0, 0, -0, 0],
[12.4446, 9.66663, 0, 0, -0, 0],
[14.002, 17.2228, 0, 0, -0, 0],
[19.5704, 8.8159, 0, 0, -0, 0],
[28.3468, 6.54846, 0, 0, -0, 0],
[18.581, 6.41117, 0, 0, -0, 0],
[25.8133, 2.49916, 0, 0, -0, 0],
[27.6187, -2.68102, 0, 0, -0, 0],
[13.965, -0.641333, 0, 0, -0, 0],
[12.5263, 2.98768, 0, 0, -0, 0],
[14.4495, 4.5904, 0, 0, -0, 0],
[15.3907, 6.73003, 0, 0, -0, 0],
[13.8602, -5.49479, 0, 0, -0, 0],
[15.7483, -7.54742, 0, 0, -0, 0],
[19.1791, -7.61727, 0, 0, -0, 0],
[22.102, -5.47068, 0, 0, -0, 0],
[27.7151, -4.7812, 0, 0, -0, 0],
[25.7812, -7.62728, 0, 0, -0, 0],
[27.1669, -6.60742, 0, 0, -0, 0]]

random.shuffle(poses)

print( "Spawn "+ str(number) + " cans over "+ str(len(poses)) )
for i in range( number ) :
    p= repose(poses[i])
    spawn( p, model_name+'_'+ str(i+1) )
